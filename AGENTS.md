# Repository Guidelines

## Project Structure

- `src/`: main TypeScript source (utilities, constants, integrations).
- `src/**/*.test.ts`: Vitest unit tests colocated with code.
- `playground/vue/`: Vue playground for interactive/manual validation.
- `dist/`: build output (generated; don’t edit by hand).
- `.github/workflows/`: CI and release pipelines (Bun-based).

## Build, Test, and Development Commands

This repo uses **Bun** as the package manager and runtime.
Use the version pinned in `package.json#packageManager` (CI matches it).

```bash
bun install                 # install deps (uses bun.lock)
bun run build               # build library bundles + types into dist/
bun run test                # run vitest (watch/default mode)
bun run test:coverage       # run tests + V8 coverage summary
bun run lint                # biome check for formatting + lint
bun run lint:fix            # apply biome fixes where safe
```

Playground (from repo root):

```bash
bun --cwd=playground/vue run dev
bun --cwd=playground/vue run build
```

## Coding Style & Naming Conventions

- Language: TypeScript (ESM, `strict`).
- Formatting/linting: **Biome** (`bunx biome check .`).
- Indentation: 2 spaces; line width: 120.
- File naming: `kebab-case.ts` for modules; tests as `*.test.ts`.

## Testing Guidelines

- Framework: **Vitest**.
- Keep tests close to the code they validate (`src/**`).
- Add/extend tests for new behavior and bug fixes; prefer deterministic tests.
- Run locally before pushing: `bun run test:coverage`.

## Commit & Pull Request Guidelines

- This repo’s public changelog is generated by **semantic-release**, so commit messages must follow **Conventional Commits** (enforced by commitlint).
- Prefer small, focused commits (one logical change per commit), because release notes are derived from them.
- Use scopes to keep the changelog readable: `core`, `integrations`, `docs`, `playground`, `ci`, `build`.
  - Examples: `feat(core): add formatBitmask utility`, `feat(integrations): add elysia adapter`, `fix(pack): throw on invalid base64`, `chore(ci): switch workflows to bun`.
- Breaking changes: use `feat!:` / `fix!:` or add a `BREAKING CHANGE:` footer.
- PRs should include: a short description, rationale, and any relevant usage notes.
- Requirements: `bun run lint`, `bun run test:coverage`, and `bun run build` must pass; avoid committing generated `dist/` output.
